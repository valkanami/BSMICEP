<div class="loading" *ngIf="isLoading">
  <p>Cargando datos meteorológicos...</p>
</div>

<div class="compact-weather-grid">
  <div class="compact-weather-card" *ngFor="let item of weatherDataList">
    <div *ngIf="item.error" class="error-message">
      {{ item.error }}
    </div>

    <div *ngIf="item.data" class="compact-weather-content">
      <div class="compact-header">
        <h3>{{ item.data.city }}, Veracruz</h3>
        <p class="compact-date">{{ formatDate(item.data.timestamp) }} {{ formatTime(item.data.timestamp) }}</p>
      </div>
      
      <div class="compact-current">
        <div class="compact-main">
          <img [src]="getWeatherIconUrl(item.data.icon)" [alt]="item.data.description">
          <div class="compact-temp">
            <h2>{{ item.data.temperature | number:'1.0-0' }}°C</h2>
            <small>{{ capitalize(item.data.description) }}</small>
          </div>
        </div>
        
        <div class="compact-details">
          <div><i class="fas fa-temperature-low"></i> {{ item.data.feelsLike | number:'1.0-0' }}°C</div>
          <div><i class="fas fa-tint"></i> {{ item.data.humidity }}%</div>
          <div><i class="fas fa-wind"></i> {{ item.data.windSpeed }} m/s</div>
          <div><i class="fas fa-tachometer-alt"></i> {{ item.data.pressure }} hPa</div>
        </div>
      </div>

      <div class="compact-forecast">
        <h4>Pronóstico {{ formatDate(item.data.periodos.madrugada.timestamp) }}</h4>
        <div class="compact-periods">
          <div class="compact-period" *ngFor="let period of periods">
            <div class="period-time">{{ formatTime(item.data.periodos[period].timestamp) }}</div>
            <img [src]="getWeatherIconUrl(item.data.periodos[period].icon)" 
                 [alt]="item.data.periodos[period].description">
            <div class="period-temp">{{ item.data.periodos[period].temperature | number:'1.0-0' }}°C</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>